
## 운영올리면 할것. 맥 기준
1. 서버 여러개 생성 -> 로드 밸런서 적용
2. 운영서버에 kafka server-1.properties, server-2.properties 등 생성하고 싶은 브로커 갯수만큼 생성 
> cp /path/to/kafka/config/kraft/server.properties /path/to/kafka/config/kraft/server-1.properties \
> cp /path/to/kafka/config/kraft/server.properties /path/to/kafka/config/kraft/server-2.properties \
> cp /path/to/kafka/config/kraft/server.properties /path/to/kafka/config/kraft/server-3.properties

3. 각 properties 설정 -> node.id, port(listeners), log.dirs, metadata.log.dir 등 중복X
> #Server Basics, #Socket Server Settings

4. 메타데이터 디렉토리 생성 및 초기화
> mkdir -p /opt/homebrew/var/lib/kraft-combined-logs-1 \
>mkdir -p /opt/homebrew/var/lib/kraft-combined-logs-2 \
>mkdir -p /opt/homebrew/var/lib/kraft-combined-logs-3 \
>rm -rf /opt/homebrew/var/lib/kraft-combined-logs-1/* \
>rm -rf /opt/homebrew/var/lib/kraft-combined-logs-2/* \
>rm -rf /opt/homebrew/var/lib/kraft-combined-logs-3/*

5. 클러스터 ID 생성 및 초기화
> CLUSTER_ID=$(bin/kafka-storage.sh random-uuid | grep -oP '(?<=KRaft cluster UUID: ).*') \
>bin/kafka-storage.sh format -t $CLUSTER_ID -c /path/to/kafka/config/kraft/server-1.properties \
>bin/kafka-storage.sh format -t $CLUSTER_ID -c /path/to/kafka/config/kraft/server-2.properties \ 
>bin/kafka-storage.sh format -t $CLUSTER_ID -c /path/to/kafka/config/kraft/server-3.properties

6. 각 브로커 시작
>bin/kafka-server-start.sh /path/to/kafka/config/kraft/server-1.properties & \
>bin/kafka-server-start.sh /path/to/kafka/config/kraft/server-2.properties & \
>bin/kafka-server-start.sh /path/to/kafka/config/kraft/server-3.properties &
